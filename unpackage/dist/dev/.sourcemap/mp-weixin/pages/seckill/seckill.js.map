{"version":3,"sources":["webpack:///F:/uni-app/cy_Chayuan_Uniapp/main.js","webpack:///F:/uni-app/cy_Chayuan_Uniapp/pages/seckill/seckill.vue?6c86","webpack:///F:/uni-app/cy_Chayuan_Uniapp/pages/seckill/seckill.vue?7b72","webpack:///F:/uni-app/cy_Chayuan_Uniapp/pages/seckill/seckill.vue?e45c","webpack:///F:/uni-app/cy_Chayuan_Uniapp/pages/seckill/seckill.vue?c1f9","webpack:///F:/uni-app/cy_Chayuan_Uniapp/pages/seckill/seckill.vue"],"names":["createPage","Page","data","seckillTimeList","oneTimeInfoList","isAllowFlag","nowDate","onLoad","getSeckillInfo","Math","floor","Date","getTime","methods","that","basePost","U","c","a","res","changeOneTimeInfo","seckillTime","seckillTimeIndex","id","console","log","time","nowToSeckill","index","isLogin","uni","showToast","title","icon","productId","product_id","merId","mer_id","secKillId","type","totalPrice","price","requestPayment","msg","providerList","loading","getOrderInfo_uniapp","orderInfo","statusCode","showModal","content","showCancel","provider","success","e","fail","errMsg","complete","appid","url","Promise","request","result"],"mappings":"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","file":"pages/seckill/seckill.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/seckill/seckill.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./seckill.vue?vue&type=template&id=01263711&\"\nvar renderjs\nimport script from \"./seckill.vue?vue&type=script&lang=js&\"\nexport * from \"./seckill.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('01263711')) {\n      api.createRecord('01263711', component.options)\n    } else {\n      api.reload('01263711', component.options)\n    }\n    module.hot.accept(\"./seckill.vue?vue&type=template&id=01263711&\", function () {\n      api.rerender('01263711', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/uni-app/cy_Chayuan_Uniapp/pages/seckill/seckill.vue\"\nexport default component.exports","export * from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./seckill.vue?vue&type=template&id=01263711&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./seckill.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./seckill.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tseckillTimeList:[],\n\t\t\toneTimeInfoList:[],\n\t\t\tisAllowFlag:false,\n\t\t\tnowDate:1,\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.getSeckillInfo();\n\t\tthis.nowDate = Math.floor(new Date().getTime()/1000);\n\t},\n\tmethods: {\n\t\t//获取全部时间段信息\n\t\tgetSeckillInfo(){\n\t\t\tlet that=this;\n\t\t\tthat.basePost(\n\t\t\t\tthat.U({ c: 'seckill_api', a: 'seckill_index'}),\n\t\t\t\t{},\n\t\t\t\tfunction(res) {\n\t\t\t\t\tthat.seckillTimeList = res.data;\n\t\t\t\t\tthat.changeOneTimeInfo(res.data.seckillTime[res.data.seckillTimeIndex].id);\n\t\t\t\t},\n\t\t\t\tfunction(res) {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t//获取某个时间段的商品\n\t\tchangeOneTimeInfo(id){ \n\t\t\tlet that=this;\n\t\t\tif(id == that.seckillTimeList.seckillTime[that.seckillTimeList.seckillTimeIndex].id){\n\t\t\t\tthat.isAllowFlag=true;\n\t\t\t}else{\n\t\t\t\tthat.isAllowFlag=false;\n\t\t\t}\n\t\t\tthat.oneTimeInfoList=[];\n\t\t\tthat.basePost(\n\t\t\t\tthat.U({ c: 'seckill_api', a: 'seckill_list'}),\n\t\t\t\t{\n\t\t\t\t\ttime:id\n\t\t\t\t},\n\t\t\t\tfunction(res) {\n\t\t\t\t\tthat.oneTimeInfoList=res.data;\n\t\t\t\t},\n\t\t\t\tfunction(res) {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t//现在立即秒杀\n\t\tnowToSeckill(index){\n\t\t\tlet that=this;\n\t\t\tthat.isLogin();\n\t\t\tif(!that.isAllowFlag){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:\"当前不是该时段,无法抢购\",\n\t\t\t\t\ticon:\"none\"\n\t\t\t\t})\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tthat.basePost(\n\t\t\t\tthat.U({ c: 'auth_api', a: 'redis_seckill'}),\n\t\t\t\t{\n\t\t\t\t\tproductId:that.oneTimeInfoList[index].product_id,\n\t\t\t\t\tmerId:that.oneTimeInfoList[index].mer_id,\n\t\t\t\t\tsecKillId:that.oneTimeInfoList[index].id,\n\t\t\t\t\ttype:that.oneTimeInfoList[index].type,\n\t\t\t\t\ttotalPrice:that.oneTimeInfoList[index].price,\n\t\t\t\t},\n\t\t\t\tfunction(res) {\n\t\t\t\t\tthat.requestPayment();\n\t\t\t\t},\n\t\t\t\tfunction(res) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:res.msg,\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tasync requestPayment() {\n\t\t    this.providerList[0].loading = true;\n\t\t    let orderInfo = await this.getOrderInfo_uniapp(this.providerList[0].id);\n\t\t    if (orderInfo.statusCode !== 200) {\n\t\t        console.log(\"获得订单信息失败\", orderInfo);\n\t\t        uni.showModal({\n\t\t            content: \"获得订单信息失败\",\n\t\t            showCancel: false\n\t\t        })\n\t\t        return;\n\t\t    }\n\t\t    uni.requestPayment({\n\t\t        provider: this.providerList[0].id,\n\t\t        orderInfo: orderInfo.data,\n\t\t        success: (e) => {\n\t\t            uni.showToast({\n\t\t                title: \"感谢您的赞助!\"\n\t\t            })\n\t\t        },\n\t\t        fail: (e) => {\n\t\t            uni.showModal({\n\t\t                content: \"支付失败,原因为: \" + e.errMsg,\n\t\t                showCancel: false\n\t\t            })\n\t\t        },\n\t\t        complete: () => {\n\t\t            this.providerList[1].loading = false;\n\t\t        }\n\t\t    })\n\t\t},\n\t\t\n\t\tgetOrderInfo_uniapp(e) { \n\t\t    let appid = \"\";\n\n\n\n\t\t    let url = 'https://demo.dcloud.net.cn/payment/?payid=' + e + '&appid=' + appid + '&total=0.1' ;\n\t\t    return new Promise((res) => {\n\t\t        uni.request({\n\t\t            url: url,\n\t\t            success: (result) => {\n\t\t                res(result);\n\t\t            },\n\t\t            fail: (e) => {\n\t\t                res(e);\n\t\t            }\n\t\t        })\n\t\t    })\n\t\t},\n\t}\n}\n"],"sourceRoot":""}