{"version":3,"sources":["webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue?286b","webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue?9978","webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue?abc2","webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue?03d8","webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue","webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue?c155","webpack:///F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue?0faa"],"names":["_self","name","props","data","imageBasePos","x0","y0","w","h","showMoveImage","moveImagePath","moveLeft","moveTop","deltaLeft","deltaTop","dragIndex","targetImageIndex","value","computed","posMoveImageLeft","posMoveImageTop","isShowDel","enableDel","isShowAdd","methods","selectImage","uni","chooseImage","count","limit","length","success","e","imagePathArr","tempFilePaths","availableImageNumber","showToast","title","icon","mask","duration","i","push","serverUrl","remoteIndexStart","promiseWorkList","keyname","fileKeyName","completeImages","Promise","resolve","reject","remoteUrlIndex","uploadFile","url","fileType","formData","filename","filePath","header","res","console","log","statusCode","JSON","parse","showUploadProgress","fail","all","then","result","$emit","currentImages","allImages","currentIndex","deleteImage","imageIndex","currentTarget","dataset","index","deletedImagePath","splice","serverUrlDeleteImage","request","method","pic","$store","state","token","currentImage","previewImage","current","indicator","loop","urls","initImageBasePos","paddingRate","getSystemInfo","obj","screenWidth","leftPadding","Math","ceil","imageWidth","findOverlapImage","posX","posY","rows","floor","cols","indx","isDragging","start","isDragable","basePosY","currentImageOffsetTop","offsetTop","target","offsetLeft","move","touch","touches","clientX","clientY","stop"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiG;AAC3B;AACL;AACa;;;AAG9E;AAC6J;AAC7J,gBAAgB,0KAAU;AAC1B,EAAE,wFAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAo5B,CAAgB,+5BAAG,EAAC,C;;;;;;;;;;;;mICAx6B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,KAAJ,C;;AAEe;AACdC,MAAI,EAAC,oBADS;AAEdC,OAAK,EAAE,CAAC,cAAD,EAAgB,WAAhB,EAA4B,WAA5B,EAAwC,YAAxC,EAAqD,WAArD,EAAiE,UAAjE,EAA4E,OAA5E,EAAoF,aAApF,EAAkG,oBAAlG,EAAuH,sBAAvH,CAFO;AAGdC,MAHc,kBAGP;AACN,WAAO;AACNC,kBAAY,EAAC;AACZC,UAAE,EAAE,CAAC,CADO;AAEZC,UAAE,EAAE,CAAC,CAFO;AAGZC,SAAC,EAAC,CAAC,CAHS;AAIZC,SAAC,EAAC,CAAC,CAJS,EADP;;AAONC,mBAAa,EAAE,KAPT;AAQNC,mBAAa,EAAE,EART;AASNC,cAAQ,EAAE,CATJ;AAUNC,aAAO,EAAE,CAVH;AAWNC,eAAS,EAAE,CAXL;AAYNC,cAAQ,EAAE,CAZJ;AAaNC,eAAS,EAAE,IAbL;AAcNC,sBAAgB,EAAE,IAdZ;AAeNC,WAAK,EAAC,EAfA,EAAP;;AAiBA,GArBa;AAsBdC,UAAQ,EAAC;AACRC,oBAAgB,EAAE,4BAAU;AAC3B,aAAO,KAAKR,QAAL,GAAgB,IAAvB;AACA,KAHO;AAIRS,mBAAe,EAAE,2BAAU;AAC1B,aAAO,KAAKR,OAAL,GAAe,IAAtB;AACA,KANO;AAORS,aAAS,EAAE,qBAAU;AACpB,UAAG,KAAKC,SAAL,KAAmB,KAAtB,EAA4B;AAC3B,eAAO,KAAP;AACA,OAFD,MAEK;AACJ,eAAO,IAAP;AACA;AACD,KAbO;AAcRC,aAAS,EAAE,qBAAU;AACpB,aAAO,IAAP;AACA,KAhBO,EAtBK;;AAwCdC,SAAO,EAAC;AACPC,eAAW,EAAE,uBAAU;AACtBzB,WAAK,GAAG,IAAR;AACA,UAAG,CAACA,KAAK,CAACiB,KAAV,EAAgB;AACfjB,aAAK,CAACiB,KAAN,GAAc,EAAd;AACA;;AAEDS,SAAG,CAACC,WAAJ,CAAgB;AACfC,aAAK,EAAE5B,KAAK,CAAC6B,KAAN,GAAe7B,KAAK,CAAC6B,KAAN,GAAc7B,KAAK,CAACiB,KAAN,CAAYa,MAAzC,GAAkD,CAD1C;AAEfC,eAAO,EAAE,iBAASC,CAAT,EAAW;AACnB,cAAIC,YAAY,GAAGD,CAAC,CAACE,aAArB;AACA;AACA;AACA;AACA,cAAGlC,KAAK,CAAC6B,KAAT,EAAe;AACd,gBAAIM,oBAAoB,GAAGnC,KAAK,CAAC6B,KAAN,GAAc7B,KAAK,CAACiB,KAAN,CAAYa,MAArD;AACA,gBAAGK,oBAAoB,GAAGF,YAAY,CAACH,MAAvC,EAA8C;AAC7CJ,iBAAG,CAACU,SAAJ,CAAc;AACbC,qBAAK,EAAE,YAAUrC,KAAK,CAAC6B,KAAhB,GAAsB,UAAtB,GAAiCM,oBAAjC,GAAsD,GADhD;AAEbG,oBAAI,EAAC,MAFQ;AAGbC,oBAAI,EAAE,KAHO;AAIbC,wBAAQ,EAAE,IAJG,EAAd;;AAMA;AACA;AACD;;AAED,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACR,YAAY,CAACH,MAA5B,EAAmCW,CAAC,EAApC,EAAuC;AACtCzC,iBAAK,CAACiB,KAAN,CAAYyB,IAAZ,CAAiBT,YAAY,CAACQ,CAAD,CAA7B;AACA;;AAED;AACA,cAAGzC,KAAK,CAAC2C,SAAT,EAAmB;AAClB,gBAAIC,gBAAgB,GAAG5C,KAAK,CAACiB,KAAN,CAAYa,MAAZ,GAAqBG,YAAY,CAACH,MAAzD;AACA,gBAAIe,eAAe,GAAG,EAAtB;AACA,gBAAIC,OAAO,GAAI9C,KAAK,CAAC+C,WAAN,GAAoB/C,KAAK,CAAC+C,WAA1B,GAAwC,eAAvD;AACA,gBAAIC,cAAc,GAAG,CAArB,CAJkB;;AAMVP,cANU;AAOjBI,6BAAe,CAACH,IAAhB,CAAqB,IAAIO,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;AACnD,oBAAIC,cAAc,GAAGR,gBAAgB,GAAGH,EAAxC;AACAf,mBAAG,CAAC2B,UAAJ,CAAe;AACdC,qBAAG,EAACtD,KAAK,CAAC2C,SADI;AAEdY,0BAAQ,EAAE,OAFI;AAGdC,0BAAQ,EAAC;AACRC,4BAAQ,EAAEX,OADF,EAHK;;AAMdY,0BAAQ,EAAEzB,YAAY,CAACQ,EAAD,CANR;AAOdxC,sBAAI,EAAE6C,OAPQ;AAQda,wBAAM,EAAC;AACN,oCAAe,qBADT,EARO;;AAWd5B,yBAAO,EAAE,iBAAS6B,GAAT,EAAa;AACrBC,2BAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,wBAAGA,GAAG,CAACG,UAAJ,KAAmB,GAAtB,EAA0B;AACzB,0BAAI5D,IAAI,GAAG6D,IAAI,CAACC,KAAL,CAAWL,GAAG,CAACzD,IAAf,CAAX;AACCA,0BAAI,CAACA,IAAL,CAAUmD,GAAV,GAAgB,yBAAyBnD,IAAI,CAACA,IAAL,CAAUmD,GAAnD;AACDtD,2BAAK,CAACiB,KAAN,CAAYmC,cAAZ,IAA8BjD,IAAI,CAACA,IAAL,CAAUmD,GAAxC;AACAN,oCAAc;AACd,0BAAGhD,KAAK,CAACkE,kBAAT,EAA4B;AAC3BxC,2BAAG,CAACU,SAAJ,CAAc;AACbC,+BAAK,EAAE,UAAUW,cAAV,GAA2B,GAA3B,GAAiCf,YAAY,CAACH,MADxC;AAEbQ,8BAAI,EAAE,MAFO;AAGbC,8BAAI,EAAE,KAHO;AAIbC,kCAAQ,EAAE,IAJG,EAAd;;AAMA;AACDqB,6BAAO,CAACC,GAAR,CAAY,8BAA8BF,GAAG,CAACzD,IAA9C;AACA+C,6BAAO,CAAC,6BAA6BE,cAA9B,CAAP;AACA,qBAfD,MAeK;AACJS,6BAAO,CAACC,GAAR,CAAY,0BAAwBF,GAAG,CAACzD,IAAxC;AACAgD,4BAAM,CAAC,2BAA2BC,cAA5B,CAAN;AACA;AACD,mBAhCa;AAiCde,sBAAI,EAAE,cAASP,GAAT,EAAa;AAClBC,2BAAO,CAACC,GAAR,CAAY,0BAAwBF,GAApC;AACAT,0BAAM,CAAC,2BAA2BC,cAA5B,CAAN;AACA,mBApCa,EAAf;;AAsCA,eAxCoB,CAArB,EAPiB,EAMlB,KAAI,IAAIX,EAAC,GAAC,CAAV,EAAaA,EAAC,GAACR,YAAY,CAACH,MAA5B,EAAmCW,EAAC,EAApC,EAAuC,OAA/BA,EAA+B;AA0CtC;AACDQ,mBAAO,CAACmB,GAAR,CAAYvB,eAAZ,EAA6BwB,IAA7B,CAAkC,UAACC,MAAD,EAAU;AAC3CtE,mBAAK,CAACuE,KAAN,CAAY,KAAZ,EAAmB;AAClBC,6BAAa,EAAEvC,YADG;AAElBwC,yBAAS,EAAEzE,KAAK,CAACiB,KAFC;AAGlByD,4BAAY,EAAC1E,KAAK,CAAC0E,YAHD,EAAnB;;AAKA1E,mBAAK,CAACuE,KAAN,CAAY,OAAZ,EAAqBvE,KAAK,CAACiB,KAA3B;AACA,aAPD;AAQA,WAzDD,MAyDK;AACJjB,iBAAK,CAACuE,KAAN,CAAY,KAAZ,EAAmB;AAClBC,2BAAa,EAAEvC,YADG;AAElBwC,uBAAS,EAAEzE,KAAK,CAACiB,KAFC;AAGlByD,0BAAY,EAAC1E,KAAK,CAAC0E,YAHD,EAAnB;;AAKA1E,iBAAK,CAACuE,KAAN,CAAY,OAAZ,EAAqBvE,KAAK,CAACiB,KAA3B;AACA;AACD,SA1Fc,EAAhB;;AA4FA,KAnGM;AAoGP0D,eAAW,EAAE,qBAAS3C,CAAT,EAAW;AACvB,UAAI4C,UAAU,GAAG5C,CAAC,CAAC6C,aAAF,CAAgBC,OAAhB,CAAwBC,KAAzC;AACA,UAAIC,gBAAgB,GAAG,KAAK/D,KAAL,CAAW2D,UAAX,CAAvB;AACA,WAAK3D,KAAL,CAAWgE,MAAX,CAAkBL,UAAlB,EAA8B,CAA9B;AACA;AACA,UAAG,KAAKM,oBAAR,EAA6B;AAC5BxD,WAAG,CAACyD,OAAJ,CAAY;AACX7B,aAAG,EAAE,KAAK4B,oBADC;AAEXE,gBAAM,EAAE,KAFG;AAGXjF,cAAI,EAAE;AACLkF,eAAG,EAAEL,gBADA,EAHK;;AAMXrB,gBAAM,EAAC;AACN,qBAAQ,KAAK2B,MAAL,CAAYC,KAAZ,CAAkBC,KADpB,EANI;;AASXzD,iBAAO,EAAE,iBAAA6B,GAAG,EAAI;AACfC,mBAAO,CAACC,GAAR,CAAYF,GAAG,CAACzD,IAAhB;AACA,WAXU,EAAZ;;AAaA;;AAED,WAAKoE,KAAL,CAAW,QAAX,EAAoB;AACnBkB,oBAAY,EAAET,gBADK;AAEnBP,iBAAS,EAAE,KAAKxD,KAFG;AAGnByD,oBAAY,EAAC,KAAKA,YAHC,EAApB;;AAKA,WAAKH,KAAL,CAAW,OAAX,EAAoB,KAAKtD,KAAzB;AACA,KA/HM;AAgIPyE,gBAAY,EAAE,sBAAS1D,CAAT,EAAW;AACxB,UAAI4C,UAAU,GAAG5C,CAAC,CAAC6C,aAAF,CAAgBC,OAAhB,CAAwBC,KAAzC;AACArD,SAAG,CAACgE,YAAJ,CAAiB;AAChBC,eAAO,EAAE,KAAK1E,KAAL,CAAW2D,UAAX,CADO;AAEhBgB,iBAAS,EAAE,QAFK;AAGhBC,YAAI,EAAE,MAHU;AAIhBC,YAAI,EAAC,KAAK7E,KAJM,EAAjB;;AAMA,KAxIM;AAyIP8E,oBAAgB,EAAE,4BAAU;AAC3B,UAAIC,WAAW,GAAG,KAAlB;AACAhG,WAAK,GAAG,IAAR;AACA;AACA0B,SAAG,CAACuE,aAAJ,CAAkB;AACjBlE,eAAO,EAAE,iBAASmE,GAAT,EAAc;AACtB,cAAIC,WAAW,GAAGD,GAAG,CAACC,WAAtB;AACA,cAAIC,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUN,WAAW,GAAGG,WAAxB,CAAlB;AACA,cAAII,UAAU,GAAGF,IAAI,CAACC,IAAL,CAAU,CAACH,WAAW,GAAG,IAAEC,WAAjB,IAA8B,CAAxC,CAAjB;;AAEApG,eAAK,CAACI,YAAN,CAAmBC,EAAnB,GAAwB+F,WAAxB;AACApG,eAAK,CAACI,YAAN,CAAmBG,CAAnB,GAAuBgG,UAAvB;AACAvG,eAAK,CAACI,YAAN,CAAmBI,CAAnB,GAAuB+F,UAAvB;AACA,SATgB,EAAlB;;AAWA,KAxJM;AAyJPC,oBAAgB,EAAE,0BAASC,IAAT,EAAeC,IAAf,EAAoB;AACrC,UAAIC,IAAI,GAAGN,IAAI,CAACO,KAAL,CAAW,CAACH,IAAI,GAAC,KAAKrG,YAAL,CAAkBC,EAAxB,IAA4B,KAAKD,YAAL,CAAkBG,CAAzD,CAAX;AACA,UAAIsG,IAAI,GAAGR,IAAI,CAACO,KAAL,CAAW,CAACF,IAAI,GAAC,KAAKtG,YAAL,CAAkBE,EAAxB,IAA4B,KAAKF,YAAL,CAAkBI,CAAzD,CAAX;AACA,UAAIsG,IAAI,GAAGD,IAAI,GAAC,CAAL,GAASF,IAApB;AACA,aAAOG,IAAP;AACA,KA9JM;AA+JPC,cAAU,EAAE,oBAASD,IAAT,EAAc;AACzB,aAAO,KAAK/F,SAAL,KAAmB+F,IAA1B;AACA,KAjKM;AAkKPE,SAAK,EAAE,eAAShF,CAAT,EAAW;AACjB,UAAG,CAAC,KAAKiF,UAAT,EAAoB;AACnB;AACA;AACD,WAAKlG,SAAL,GAAiBiB,CAAC,CAAC6C,aAAF,CAAgBC,OAAhB,CAAwBC,KAAzC;AACA,WAAKrE,aAAL,GAAqB,KAAKO,KAAL,CAAW,KAAKF,SAAhB,CAArB;AACA,WAAKN,aAAL,GAAqB,IAArB;;AAEA;AACA,UAAG,KAAKL,YAAL,CAAkBE,EAAlB,KAAyB,CAAC,CAA7B,EAA+B;AAC9B,aAAKyF,gBAAL;;AAEA,YAAImB,QAAQ,GAAGb,IAAI,CAACO,KAAL,CAAW,KAAK7F,SAAL,GAAiB,CAA5B,IAAiC,KAAKX,YAAL,CAAkBI,CAAlE;AACA,YAAI2G,qBAAqB,GAAGnF,CAAC,CAAC6C,aAAF,CAAgBuC,SAA5C;AACA,aAAKhH,YAAL,CAAkBE,EAAlB,GAAuB6G,qBAAqB,GAAGD,QAA/C;AACA;;AAED;AACA,WAAKvG,QAAL,GAAgBqB,CAAC,CAACqF,MAAF,CAASC,UAAzB;AACA,WAAK1G,OAAL,GAAeoB,CAAC,CAACqF,MAAF,CAASD,SAAxB;AACA,KAtLM;AAuLPG,QAAI,EAAE,cAASvF,CAAT,EAAW;AAChB,UAAG,CAAC,KAAKiF,UAAT,EAAoB;AACnB;AACA;AACD,UAAMO,KAAK,GAAGxF,CAAC,CAACyF,OAAF,CAAU,CAAV,CAAd;AACA,WAAKzG,gBAAL,GAAwB,KAAKwF,gBAAL,CAAsBgB,KAAK,CAACE,OAA5B,EAAqCF,KAAK,CAACG,OAA3C,CAAxB;;AAEA;AACA,UAAG,KAAK9G,SAAL,KAAmB,CAAtB,EAAwB;AACvB,aAAKA,SAAL,GAAiB2G,KAAK,CAACE,OAAN,GAAgB,KAAK/G,QAAtC;AACA,aAAKG,QAAL,GAAgB0G,KAAK,CAACG,OAAN,GAAgB,KAAK/G,OAArC;AACA;;AAED;AACA,WAAKD,QAAL,GAAgB6G,KAAK,CAACE,OAAN,GAAgB,KAAK7G,SAArC;AACA,WAAKD,OAAL,GAAe4G,KAAK,CAACG,OAAN,GAAgB,KAAK7G,QAApC;AACA,KAvMM;AAwMP8G,QAAI,EAAE,cAAS5F,CAAT,EAAW;AAChB,UAAG,CAAC,KAAKiF,UAAT,EAAoB;AACnB;AACA;AACD,UAAG,KAAKlG,SAAL,KAAmB,IAAnB,IAA2B,KAAKC,gBAAL,KAA0B,IAAxD,EAA6D;AAC5D,YAAG,KAAKA,gBAAL,GAAsB,CAAzB,EAA2B;AAC1B,eAAKA,gBAAL,GAAwB,CAAxB;AACA;;AAED,YAAG,KAAKA,gBAAL,IAAuB,KAAKC,KAAL,CAAWa,MAArC,EAA4C;AAC3C,eAAKd,gBAAL,GAAwB,KAAKC,KAAL,CAAWa,MAAX,GAAkB,CAA1C;AACA;AACD;AACA,YAAG,KAAKf,SAAL,KAAmB,KAAKC,gBAA3B,EAA4C;AAC3C,eAAKC,KAAL,CAAW,KAAKF,SAAhB,IAA6B,KAAKE,KAAL,CAAW,KAAKD,gBAAhB,CAA7B;AACA,eAAKC,KAAL,CAAW,KAAKD,gBAAhB,IAAoC,KAAKN,aAAzC;AACA;AACD;;AAED,WAAKK,SAAL,GAAiB,IAAjB;AACA,WAAKC,gBAAL,GAAwB,IAAxB;AACA,WAAKH,SAAL,GAAiB,CAAjB;AACA,WAAKC,QAAL,GAAgB,CAAhB;AACA,WAAKL,aAAL,GAAqB,KAArB;;AAEA,WAAK8D,KAAL,CAAW,OAAX,EAAoB,KAAKtD,KAAzB;AACA,KAlOM,EAxCM,E;;;;;;;;;;;;;ACff;AAAA;AAAA;AAAA;AAA2rC,CAAgB,grCAAG,EAAC,C;;;;;;;;;;;ACA/sC,uC","file":"components/robby-image-upload/robby-image-upload.js","sourcesContent":["import { render, staticRenderFns } from \"./robby-image-upload.vue?vue&type=template&id=37dd7fb9&\"\nimport script from \"./robby-image-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./robby-image-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./robby-image-upload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('37dd7fb9', component.options)\n    } else {\n      api.reload('37dd7fb9', component.options)\n    }\n    module.hot.accept(\"./robby-image-upload.vue?vue&type=template&id=37dd7fb9&\", function () {\n      api.rerender('37dd7fb9', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/uni-app/cy_Chayuan_Uniapp/components/robby-image-upload/robby-image-upload.vue\"\nexport default component.exports","export * from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./robby-image-upload.vue?vue&type=template&id=37dd7fb9&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.value, function(path, index) {\n    var m0 = _vm.isDragging(index)\n    return {\n      $orig: _vm.__get_orig(path),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./robby-image-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./robby-image-upload.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar _self;\n\nexport default {\n\tname:'robby-image-upload',\n\tprops: ['currentIndex','enableDel','enableAdd','enableDrag','serverUrl','formData','limit','fileKeyName','showUploadProgress','serverUrlDeleteImage'],\n\tdata() {\n\t\treturn {\n\t\t\timageBasePos:{\n\t\t\t\tx0: -1,\n\t\t\t\ty0: -1,\n\t\t\t\tw:-1,\n\t\t\t\th:-1,\n\t\t\t},\n\t\t\tshowMoveImage: false,\n\t\t\tmoveImagePath: '',\n\t\t\tmoveLeft: 0,\n\t\t\tmoveTop: 0,\n\t\t\tdeltaLeft: 0,\n\t\t\tdeltaTop: 0,\n\t\t\tdragIndex: null,\n\t\t\ttargetImageIndex: null,\n\t\t\tvalue:[],\n\t\t}\n\t},\n\tcomputed:{\n\t\tposMoveImageLeft: function(){ \n\t\t\treturn this.moveLeft + 'px'\n\t\t},\n\t\tposMoveImageTop: function(){\n\t\t\treturn this.moveTop + 'px'\n\t\t},\n\t\tisShowDel: function(){\n\t\t\tif(this.enableDel === false){\n\t\t\t\treturn false\n\t\t\t}else{\n\t\t\t\treturn true\n\t\t\t}\n\t\t},\n\t\tisShowAdd: function(){\n\t\t\treturn true\n\t\t},\n\t},\n\tmethods:{\n\t\tselectImage: function(){\n\t\t\t_self = this\n\t\t\tif(!_self.value){\n\t\t\t\t_self.value = []\n\t\t\t} \n\t\t\t\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: _self.limit ? (_self.limit - _self.value.length) :4,\n\t\t\t\tsuccess: function(e){\n\t\t\t\t\tvar imagePathArr = e.tempFilePaths\n\t\t\t\t\t//如果设置了limit限制，在web上count参数无效，这里做判断控制选择的数量是否合要求\n\t\t\t\t\t//在非微信小程序里，虽然可以选多张，但选择的结果会被截掉\n\t\t\t\t\t//在app里，会自动做选择数量的限制\n\t\t\t\t\tif(_self.limit){\n\t\t\t\t\t\tvar availableImageNumber = _self.limit - _self.value.length\n\t\t\t\t\t\tif(availableImageNumber < imagePathArr.length){\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '图片总数限制为'+_self.limit+'张，当前还可以选'+availableImageNumber+'张',\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\tmask: false,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor(let i=0; i<imagePathArr.length;i++){\n\t\t\t\t\t\t_self.value.push(imagePathArr[i])\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//检查服务器地址是否设置，设置即表示图片要上传到服务器\n\t\t\t\t\tif(_self.serverUrl){\n\t\t\t\t\t\tvar remoteIndexStart = _self.value.length - imagePathArr.length\n\t\t\t\t\t\tvar promiseWorkList = []\n\t\t\t\t\t\tvar keyname = (_self.fileKeyName ? _self.fileKeyName : 'upload-images')\n\t\t\t\t\t\tvar completeImages = 0\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor(let i=0; i<imagePathArr.length;i++){\n\t\t\t\t\t\t\tpromiseWorkList.push(new Promise((resolve, reject)=>{\n\t\t\t\t\t\t\t\tlet remoteUrlIndex = remoteIndexStart + i;\n\t\t\t\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\t\t\t\turl:_self.serverUrl,\n\t\t\t\t\t\t\t\t\tfileType: 'image',\n\t\t\t\t\t\t\t\t\tformData:{\n\t\t\t\t\t\t\t\t\t\tfilename: keyname,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfilePath: imagePathArr[i], \n\t\t\t\t\t\t\t\t\tname: keyname,\n\t\t\t\t\t\t\t\t\theader:{\n\t\t\t\t\t\t\t\t\t\t\"Content-Type\":\"multipart/form-data\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess: function(res){\n\t\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\t\tif(res.statusCode === 200){\n\t\t\t\t\t\t\t\t\t\t\tvar data = JSON.parse(res.data);\n\t\t\t\t\t\t\t\t\t\t\t\tdata.data.url = 'http://www.fyang.com' + data.data.url \n\t\t\t\t\t\t\t\t\t\t\t_self.value[remoteUrlIndex] = data.data.url;\n\t\t\t\t\t\t\t\t\t\t\tcompleteImages ++\n\t\t\t\t\t\t\t\t\t\t\tif(_self.showUploadProgress){\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '上传进度：' + completeImages + '/' + imagePathArr.length,\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\tmask: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('success to upload image: ' + res.data)\n\t\t\t\t\t\t\t\t\t\t\tresolve('success to upload image:' + remoteUrlIndex)\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('fail to upload image:'+res.data)\n\t\t\t\t\t\t\t\t\t\t\treject('failt to upload image:' + remoteUrlIndex)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail: function(res){\n\t\t\t\t\t\t\t\t\t\tconsole.log('fail to upload image:'+res)\n\t\t\t\t\t\t\t\t\t\treject('failt to upload image:' + remoteUrlIndex)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tPromise.all(promiseWorkList).then((result)=>{\n\t\t\t\t\t\t\t_self.$emit('add', {\n\t\t\t\t\t\t\t\tcurrentImages: imagePathArr,\n\t\t\t\t\t\t\t\tallImages: _self.value,\n\t\t\t\t\t\t\t\tcurrentIndex:_self.currentIndex,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t_self.$emit('input', _self.value)\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\t_self.$emit('add', {\n\t\t\t\t\t\t\tcurrentImages: imagePathArr,\n\t\t\t\t\t\t\tallImages: _self.value,\n\t\t\t\t\t\t\tcurrentIndex:_self.currentIndex,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t_self.$emit('input', _self.value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeleteImage: function(e){\n\t\t\tvar imageIndex = e.currentTarget.dataset.index\n\t\t\tvar deletedImagePath = this.value[imageIndex]\n\t\t\tthis.value.splice(imageIndex, 1) \n\t\t\t//检查删除图片的服务器地址是否设置，如果设置则调用API，在服务器端删除该图片\n\t\t\tif(this.serverUrlDeleteImage){\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.serverUrlDeleteImage,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpic: deletedImagePath\n\t\t\t\t\t},\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'token':this.$store.state.token\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.$emit('delete',{\n\t\t\t\tcurrentImage: deletedImagePath,\n\t\t\t\tallImages: this.value,\n\t\t\t\tcurrentIndex:this.currentIndex,\n\t\t\t})\n\t\t\tthis.$emit('input', this.value)\n\t\t},\n\t\tpreviewImage: function(e){\n\t\t\tvar imageIndex = e.currentTarget.dataset.index\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: this.value[imageIndex],\n\t\t\t\tindicator: \"number\",\n\t\t\t\tloop: \"true\",\n\t\t\t\turls:this.value\n\t\t\t})\n\t\t},\n\t\tinitImageBasePos: function(){\n\t\t\tlet paddingRate = 0.024\n\t\t\t_self = this\n\t\t\t//计算图片基准位置\n\t\t\tuni.getSystemInfo({\n\t\t\t\tsuccess: function(obj) {\n\t\t\t\t\tlet screenWidth = obj.screenWidth\n\t\t\t\t\tlet leftPadding = Math.ceil(paddingRate * screenWidth)\n\t\t\t\t\tlet imageWidth = Math.ceil((screenWidth - 2*leftPadding)/4)\n\t\t\t\t\t\n\t\t\t\t\t_self.imageBasePos.x0 = leftPadding\n\t\t\t\t\t_self.imageBasePos.w = imageWidth\n\t\t\t\t\t_self.imageBasePos.h = imageWidth\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tfindOverlapImage: function(posX, posY){\n\t\t\tlet rows = Math.floor((posX-this.imageBasePos.x0)/this.imageBasePos.w)\n\t\t\tlet cols = Math.floor((posY-this.imageBasePos.y0)/this.imageBasePos.h)\n\t\t\tlet indx = cols*4 + rows\n\t\t\treturn indx\n\t\t},\n\t\tisDragging: function(indx){\n\t\t\treturn this.dragIndex === indx\n\t\t},\n\t\tstart: function(e){\n\t\t\tif(!this.isDragable){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.dragIndex = e.currentTarget.dataset.index\n\t\t\tthis.moveImagePath = this.value[this.dragIndex]\n\t\t\tthis.showMoveImage = true\n\t\t\t\n\t\t\t//计算纵向图片基准位置\n\t\t\tif(this.imageBasePos.y0 === -1){\n\t\t\t\tthis.initImageBasePos()\n\t\t\t\t\n\t\t\t\tlet basePosY = Math.floor(this.dragIndex / 4) * this.imageBasePos.h\n\t\t\t\tlet currentImageOffsetTop = e.currentTarget.offsetTop\n\t\t\t\tthis.imageBasePos.y0 = currentImageOffsetTop - basePosY\n\t\t\t}\n\t\t\t\n\t\t\t//设置选中图片当前左上角的坐标\n\t\t\tthis.moveLeft = e.target.offsetLeft\n\t\t\tthis.moveTop = e.target.offsetTop\n\t\t},\n\t\tmove: function(e){\n\t\t\tif(!this.isDragable){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst touch = e.touches[0]\n\t\t\tthis.targetImageIndex = this.findOverlapImage(touch.clientX, touch.clientY)\n\t\t\t\n\t\t\t//初始化deltaLeft/deltaTop\n\t\t\tif(this.deltaLeft === 0){\n\t\t\t\tthis.deltaLeft = touch.clientX - this.moveLeft\n\t\t\t\tthis.deltaTop = touch.clientY - this.moveTop \n\t\t\t}\n\t\t\t\n\t\t\t//设置移动图片位置\n\t\t\tthis.moveLeft = touch.clientX - this.deltaLeft\n\t\t\tthis.moveTop = touch.clientY - this.deltaTop\n\t\t},\n\t\tstop: function(e){\n\t\t\tif(!this.isDragable){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(this.dragIndex !== null && this.targetImageIndex !== null){\n\t\t\t\tif(this.targetImageIndex<0){\n\t\t\t\t\tthis.targetImageIndex = 0\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(this.targetImageIndex>=this.value.length){\n\t\t\t\t\tthis.targetImageIndex = this.value.length-1\n\t\t\t\t}\n\t\t\t\t//交换图片\n\t\t\t\tif(this.dragIndex !== this.targetImageIndex){\n\t\t\t\t\tthis.value[this.dragIndex] = this.value[this.targetImageIndex]\n\t\t\t\t\tthis.value[this.targetImageIndex] = this.moveImagePath\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.dragIndex = null\n\t\t\tthis.targetImageIndex = null\n\t\t\tthis.deltaLeft = 0\n\t\t\tthis.deltaTop = 0\n\t\t\tthis.showMoveImage = false\n\t\t\t\n\t\t\tthis.$emit('input', this.value)\n\t\t}\n\t}\n}\n","import mod from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./robby-image-upload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\H_HBuilderX.2.1.3.20190723.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./robby-image-upload.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}