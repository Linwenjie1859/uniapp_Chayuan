<view><view class="loading-more"><block wx:if="{{refreshFlag}}"><uni-load-more vue-id="1" status="{{loadingStatus}}" bind:__l="__l"></uni-load-more></block></view><view class="margin-lr-sm"><block wx:for="{{$root.l0}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="flex flex-direction has-radius bg-white margin-top-sm"><view class="flex justify-between align-center padding-top-sm margin-lr-sm"><view class="flex align-center"><view data-event-opts="{{[['tap',[['setCheckedList',[index]]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[row.g0!=-1?'on':'']}}"></view></view></view><text class="cuIcon-shop margin-lr-xs text-orange" style="font-size:44rpx;"></text><text class="text-lg">{{row.$orig.name}}</text></view><text data-event-opts="{{[['tap',[['getCupon',['$event']]]]]}}" class="text-df" bindtap="__e">领券</text></view><block wx:for="{{row.$orig.list}}" wx:for-item="rows" wx:for-index="ind" wx:key="ind"><view class="flex has-radius view-is-position"><view data-event-opts="{{[['tap',[['deleteGood',['$0',index,ind],[[['goodsList','',index],['list','',ind,'id']]]]]]]}}" class="menu" catchtap="__e"><text class="cuIcon-delete" style="font-size:36rpx;"></text></view><view data-event-opts="{{[['touchstart',[['touchStart',['$0','$event'],[[['goodsList','',index],['list','',ind,'id']]]]]],['touchmove',[['touchMove',['$0','$event'],[[['goodsList','',index],['list','',ind,'id']]]]]],['touchend',[['touchEnd',['$0','$event'],[[['goodsList','',index],['list','',ind,'id']]]]]]]}}" class="{{['carrier',theIndex==rows.id?'open':oldIndex==rows.id?'close':'']}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"><view class="goods-info margin-lr-sm"><view data-event-opts="{{[['tap',[['setCheckedItem',[index,ind]]]]]}}" class="checkbox-box margin-right-xs" bindtap="__e"><view class="checkbox"><view class="{{[rows.checked?'on':'']}}"></view></view></view><image class="margin-left-xs radius" src="{{rows.productInfo.image}}" data-event-opts="{{[['tap',[['goodDetail',['$0'],[[['goodsList','',index],['list','',ind,'productInfo.id']]]]]]]}}" bindtap="__e"></image><view class="margin-left-sm flex flex-direction" style="width:460rpx;"><text class="text-cut-two text-df">{{rows.productInfo.store_name}}</text><view class="flex justify-between margin-top-sm"><text class="text-red text-price text-df">{{rows.productInfo.price}}</text><view class="text-grey flex margin-right-xs"><text data-event-opts="{{[['tap',[['addSubNum',[index,ind,-1]]]]]}}" class="text-has-border-left" bindtap="__e">-</text><input class="text-df text-has-border" type="number" data-event-opts="{{[['blur',[['addSubNum',[index,ind,0]],['$forceUpdate']]],['input',[['__set_model',['$0','cart_num','$event',['number']],[[['goodsList','',index],['list','',ind]]]]]]]}}" value="{{rows.cart_num}}" bindblur="__e" bindinput="__e"/><text data-event-opts="{{[['tap',[['addSubNum',[index,ind,1]]]]]}}" class="text-has-border-right" bindtap="__e">+</text></view></view></view></view></view></view></block></view></block></view><view style="height:110rpx;"></view><view class="footer"><view class="flex"><view data-event-opts="{{[['tap',[['setCheckedFlag',['$event']]]]]}}" class="margin-left-sm" bindtap="__e"><view class="checkbox"><view class="{{[checkedAllFlag?'on':'']}}"></view></view></view><view class="text-df margin-left-xs">全选</view></view><view class="flex align-center text-df">合计:<view class="text-sm orange text-price margin-left-xs">{{sumAllPrice}}</view><button data-event-opts="{{[['tap',[['purchase',['$event']]]]]}}" class="bg-gradual-green text-df margin-lr-sm" bindtap="__e">{{"结算"+(checkedNum==0?'':'('+checkedNum+')')}}</button></view></view></view>