(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_order/my_order"],{"1a27":function(t,e,n){"use strict";(function(t,a){function i(t){return o(t)||s(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"512e"))},d={components:{uniLoadMore:u},data:function(){return{currentLoadFlag:!0,newsList:[],tabIndex:0,scrollInto:"",tabBars:[{title:"全部"},{title:"待付款"},{title:"待发货"},{title:"待收货"},{title:"待评价"}]}},onLoad:function(t){this.initInfo(),this.tabIndex=t.index},onShow:function(){this.newsList[this.tabIndex].data=[],this.newsList[this.tabIndex].currentPage=1,this.newsList[this.tabIndex].loadingFlag=!1,this.newsList[this.tabIndex].nodata=!1,this.newsList[this.tabIndex].refreshFlag=!0,this.getOrderList(this.tabIndex)},methods:{initInfo:function(){var t=this;this.tabBars.forEach(function(e){t.newsList.push({data:[],refreshText:"",loadingStatus:"more",refreshStatus:"loading",currentPage:1,pageSize:6,loadingFlag:!1,refreshFlag:!0,nodata:!1})})},loadMore:function(){var t=this;t.currentLoadFlag&&(t.currentLoadFlag=!1,t.newsList[t.tabIndex].loadingStatus="loading",t.newsList[t.tabIndex].loadingFlag=!0,setTimeout(function(){t.getOrderList(t.tabIndex)},400)),setTimeout(function(){t.currentLoadFlag=!0},500)},ontabtap:function(t){var e=t.target.dataset.current||t.currentTarget.dataset.current;this.tabIndex=e},ontabchange:function(t){var e=t.target.current||t.detail.current;this.tabIndex=e,this.scrollInto=this.tabBars[e].id,this.newsList[this.tabIndex].data=[],this.newsList[this.tabIndex].currentPage=1,this.newsList[this.tabIndex].loadingFlag=!1,this.newsList[this.tabIndex].nodata=!1,this.newsList[this.tabIndex].refreshFlag=!0,this.getOrderList(this.tabIndex)},closeLoadingFlag:function(){var t=this;setTimeout(function(){t.newsList[t.tabIndex].loadingFlag=!1},800)},getOrderList:function(e){var n=this;n.basePost(n.U({c:"user_api",a:"get_user_order_list"}),{status:0==e?"":1==e?0:2==e?1:3==e?2:3,page:n.newsList[e].currentPage,limit:n.newsList[e].pageSize,search:""},function(a){if(n.newsList[n.tabIndex].refreshFlag=!1,t.stopPullDownRefresh(),n.newsList[e].nodata=0==a.data.length&&0==n.newsList[e].data,0==a.data.length)return n.newsList[e].loadingStatus="noMore",void n.closeLoadingFlag();n.newsList[e].data=[].concat(i(n.newsList[e].data),i(a.data)),n.newsList[e].currentPage++},function(t){a("log",t," at pages\\user\\my_order\\my_order.vue:211")})},tabsChange:function(t){this.current=t},purchase:function(e,n){var a={order_id:this.newsList[e].data[n].order_id,total_price:this.newsList[e].data[n].total_price};t.navigateTo({url:"/pages/user/confirm_payment/confirm_payment?orderInfo="+JSON.stringify(a)})},closeOrder:function(e,n,i){var r=this;t.showModal({title:"提示",content:"确定删除这个订单？",success:function(t){t.confirm&&r.basePost(r.U({c:"user_api",a:"user_remove_order"}),{uni:e},function(t){r.newsList[n].data.splice(i,1)},function(t){a("log",t," at pages\\user\\my_order\\my_order.vue:246")})}})},confirmGood:function(t,e,n){var i=this;i.basePost(i.U({c:"user_api",a:"user_take_order"}),{uni:t},function(t){i.Tips({title:"确认成功,立即前往评价~"}),i.newsList[e].data.splice(n,1),i.tabIndex=4},function(t){a("log",t," at pages\\user\\my_order\\my_order.vue:269")})},details:function(e){t.navigateTo({url:"/pages/user/order_details/order_details?order_id="+e})},evaluation:function(e,n){for(var a=[],i=this.newsList[e].data[n].cartInfo,r=0;r<i.length;r++){var s={unique:i[r].unique,image:i[r].productInfo.image};a.push(s)}t.navigateTo({url:"/pages/user/my_evaluation/my_evaluation?listUnique="+JSON.stringify(a)})},logistics:function(e){t.navigateTo({url:"/pages/shop/shop_logistics/shop_logistics?order_id="+e})}}};e.default=d}).call(this,n("6e42")["default"],n("0de9")["default"])},"61d2":function(t,e,n){"use strict";n.r(e);var a=n("7c6f"),i=n("80e3");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("ce46");var s,o=n("f0c5"),u=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=u.exports},"7c6f":function(t,e,n){"use strict";var a={"uni-load-more":()=>n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"512e"))},i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return a})},"80e3":function(t,e,n){"use strict";n.r(e);var a=n("1a27"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a},a422:function(t,e,n){"use strict";(function(t){n("7a84"),n("921b");a(n("66fd"));var e=a(n("61d2"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},b52d:function(t,e,n){},ce46:function(t,e,n){"use strict";var a=n("b52d"),i=n.n(a);i.a}},[["a422","common/runtime","common/vendor"]]]);