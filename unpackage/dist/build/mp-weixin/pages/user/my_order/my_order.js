(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_order/my_order"],{"1a27":function(t,n,e){"use strict";(function(t){function a(t){return r(t)||s(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){return e.e("components/uni-load-more/uni-load-more").then(e.bind(null,"512e"))},u={components:{uniLoadMore:o},data:function(){return{currentLoadFlag:!0,newsList:[],tabIndex:0,scrollInto:"",tabBars:[{title:"全部"},{title:"待付款"},{title:"待发货"},{title:"待收货"},{title:"待评价"}]}},onLoad:function(t){this.initInfo(),this.tabIndex=t.index},onShow:function(){this.newsList[this.tabIndex].data=[],this.newsList[this.tabIndex].currentPage=1,this.newsList[this.tabIndex].loadingFlag=!1,this.newsList[this.tabIndex].nodata=!1,this.newsList[this.tabIndex].refreshFlag=!0,this.getOrderList(this.tabIndex)},methods:{initInfo:function(){var t=this;this.tabBars.forEach(function(n){t.newsList.push({data:[],refreshText:"",loadingStatus:"more",refreshStatus:"loading",currentPage:1,pageSize:6,loadingFlag:!1,refreshFlag:!0,nodata:!1})})},loadMore:function(){var t=this;t.currentLoadFlag&&(t.currentLoadFlag=!1,t.newsList[t.tabIndex].loadingStatus="loading",t.newsList[t.tabIndex].loadingFlag=!0,setTimeout(function(){t.getOrderList(t.tabIndex)},400)),setTimeout(function(){t.currentLoadFlag=!0},500)},ontabtap:function(t){var n=t.target.dataset.current||t.currentTarget.dataset.current;this.tabIndex=n},ontabchange:function(t){var n=t.target.current||t.detail.current;this.tabIndex=n,this.scrollInto=this.tabBars[n].id,this.newsList[this.tabIndex].data=[],this.newsList[this.tabIndex].currentPage=1,this.newsList[this.tabIndex].loadingFlag=!1,this.newsList[this.tabIndex].nodata=!1,this.newsList[this.tabIndex].refreshFlag=!0,this.getOrderList(this.tabIndex)},closeLoadingFlag:function(){var t=this;setTimeout(function(){t.newsList[t.tabIndex].loadingFlag=!1},800)},getOrderList:function(n){var e=this;e.basePost(e.U({c:"user_api",a:"get_user_order_list"}),{status:0==n?"":1==n?0:2==n?1:3==n?2:3,page:e.newsList[n].currentPage,limit:e.newsList[n].pageSize,search:""},function(i){if(e.newsList[e.tabIndex].refreshFlag=!1,t.stopPullDownRefresh(),e.newsList[n].nodata=0==i.data.length&&0==e.newsList[n].data,0==i.data.length)return e.newsList[n].loadingStatus="noMore",void e.closeLoadingFlag();e.newsList[n].data=[].concat(a(e.newsList[n].data),a(i.data)),e.newsList[n].currentPage++},function(t){console.log(t)})},tabsChange:function(t){this.current=t},purchase:function(n,e){var a={order_id:this.newsList[n].data[e].order_id,total_price:this.newsList[n].data[e].total_price};t.navigateTo({url:"/pages/user/confirm_payment/confirm_payment?orderInfo="+JSON.stringify(a)})},closeOrder:function(n,e,a){var i=this;t.showModal({title:"提示",content:"确定删除这个订单？",success:function(t){t.confirm&&i.basePost(i.U({c:"user_api",a:"user_remove_order"}),{uni:n},function(t){i.newsList[e].data.splice(a,1)},function(t){console.log(t)})}})},confirmGood:function(t,n,e){var a=this;a.basePost(a.U({c:"user_api",a:"user_take_order"}),{uni:t},function(t){a.Tips({title:"确认成功,立即前往评价~"}),a.newsList[n].data.splice(e,1),a.tabIndex=4},function(t){console.log(t)})},details:function(n){t.navigateTo({url:"/pages/user/order_details/order_details?order_id="+n})},evaluation:function(n,e){for(var a=[],i=this.newsList[n].data[e].cartInfo,s=0;s<i.length;s++){var r={unique:i[s].unique,image:i[s].productInfo.image};a.push(r)}t.navigateTo({url:"/pages/user/my_evaluation/my_evaluation?listUnique="+JSON.stringify(a)})},logistics:function(n){t.navigateTo({url:"/pages/shop/shop_logistics/shop_logistics?order_id="+n})}}};n.default=u}).call(this,e("543d")["default"])},"61d2":function(t,n,e){"use strict";e.r(n);var a=e("7c6f"),i=e("80e3");for(var s in i)"default"!==s&&function(t){e.d(n,t,function(){return i[t]})}(s);e("ce46");var r,o=e("f0c5"),u=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);n["default"]=u.exports},"7c6f":function(t,n,e){"use strict";var a={"uni-load-more":()=>e.e("components/uni-load-more/uni-load-more").then(e.bind(null,"512e"))},i=function(){var t=this,n=t.$createElement;t._self._c},s=[];e.d(n,"b",function(){return i}),e.d(n,"c",function(){return s}),e.d(n,"a",function(){return a})},"80e3":function(t,n,e){"use strict";e.r(n);var a=e("1a27"),i=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(n,t,function(){return a[t]})}(s);n["default"]=i.a},a422:function(t,n,e){"use strict";(function(t){e("7a84"),e("921b");a(e("66fd"));var n=a(e("61d2"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},b52d:function(t,n,e){},ce46:function(t,n,e){"use strict";var a=e("b52d"),i=e.n(a);i.a}},[["a422","common/runtime","common/vendor"]]]);